<?xml version="1.0" encoding="utf-8"?>
<templates>
    <t t-name="product_template">
        <div class="col-md-3 otherItem col-sm-6">
            <div t-att-id="id" class="panel panel-default product">
                <div class="panel-body padding-left-right-5">
                    <div class="row">
                        <div class="col-xs-12">
                            <img class="product-image" t-att-src="image_url"/>
                            <t t-if="modifier and !display_net">
                                <span class="label label-danger promo">
                                    <t t-esc="modifier"/>
                                </span>
                            </t>
                            <div class="promo">
                                <t t-foreach="modifiers" t-as="modif">
                                    <span class="label label-danger">
                                            <t t-esc="modif"/>
                                    </span><br/>
                                </t>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-12 mg-top-10" style="padding-right:5px">
                            <t t-if="price_type == 'oneoff'">
                                <t t-if="!display_net">
                                    <span t-att-class="(modifier or promo_price) and 'label label-default strikethrough' or 'label label-primary'">
                                        <t t-esc="price"/>&#160;<t t-esc="price_type_text"/>
                                    </span>
                                </t>
                                <t t-if="promo_price">
                                    &#160;
                                    <span class="label label-primary">
                                       <t t-esc="promo_price"/>&#160;<t t-esc="price_type_text"/>
                                    </span>
                                </t>
                            </t>
                            <t t-if="price_type == 'monthly'">
                                <span class="label label-info">
                                    <t t-esc="price"/>&#160;<t t-esc="price_type_text"/>
                                </span>
                            </t>
                            <t t-if="price_type == 'both'">
                                <t t-if="price_type_text">
                                    <span class="label label-primary">
                                        <t t-esc="price"/>&#160;<t t-esc="price_type_text"/>
                                    </span>
                                    <br/>
                                </t>
                                <t t-if="price_type_text2">
                                    <span class="label label-info">
                                        <t t-esc="price2"/>&#160;<t t-esc="price_type_text2"/>
                                    </span>
                                </t>
                            </t>
                        </div>
                        <div class="col-lg-6 col-md-12 mg-top-10">
                            <t t-if="product_type != 'packs'">
                                <div class="input-group form-group-sm has-feedback">
                                    <input type="text" t-att-id="id" min="1" value="1"
                                           data-bind="value:replyNumber" class="form-control input-sm qty no-padding-right">
                                    </input>
                                    <div class="form-control-feedback input-quantity" t-if="product_type != 'packs'">
                                        <div class="quantity-caret">
                                            <i class="fa fa-caret-up pointer"/>
                                        </div>
                                        <div class="quantity-caret">
                                            <i class="fa fa-caret-down pointer"/>
                                        </div>
                                    </div>
                                    <span class="input-group-btn">
                                        <button type="button" t-att-id="id" class="btn btn-success btn-sm add-product"><i class="fa fa-plus"/></button>
                                    </span>
                                </div>
                            </t>
                            <t t-if="product_type == 'packs'">
                                <input type="hidden" t-att-id="id" value="1" class="qty"/>
                                <button type="button" t-att-id="id" class="btn btn-success btn-sm add-product pull-right"><i class="fa fa-plus"/></button>
                            </t>
                        </div>
                        <div class="col-xs-12 mg-top-10">
                            <h5 class="wln-blue text-center" name="itemName">
                                <t t-esc="name"/>
                            </h5>
                        </div>
                    </div>
                </div>
            </div>
            <t t-if="description or children_modifier">
                <div t-attf-id="popover-content-{{id}}" class="display-none" style="max-width: 250px;">
                    <div class="col-xs-12 text-smaller">
                        <t t-if="description">
                            <div class="row"><i class="fa fa-info-circle"/> <t t-esc="description"/></div>
                        </t>
                        <t t-if="description and children_modifier">
                            <hr/>
                        </t>
                        <t t-if="children_modifier">
                            <ul style="padding-left: 3%;">
                                <t t-foreach="children_modifier" t-as="sub_product">
                                    <li>
                                        <t t-esc="sub_product[0]"/>
                                    </li>
                                </t>
                            </ul>
                        </t>
                    </div>
                </div>
            </t>
        </div>
    </t>
    <t t-name="product_pagination">
        <ul class="pagination">
            <li class="first">
                <a class="pointer">
                    <i class="fa fa-angle-double-left"/>
                </a>
            </li>
            <li class="previous">
                <a class="pointer">
                    <i class="fa fa-angle-left"/>
                </a>
            </li>
            <t t-foreach="page_numbers" t-as="number">
                <t t-if="number == active_page_number">
                    <li class="active page-num">
                        <a class="pointer">
                            <t t-esc="number"/>
                        </a>
                    </li>
                </t>
                <t t-if="number != active_page_number">
                    <li class="page-num">
                        <a class="pointer">
                            <t t-esc="number"/>
                        </a>
                    </li>
                </t>
            </t>
            <li class="next">
                <a class="pointer">
                    <i class="fa fa-angle-right"/>
                </a>
            </li>
            <li class="last">
                <a class="pointer">
                    <i class="fa fa-angle-double-right"/>
                </a>
            </li>
        </ul>
    </t>

    <t t-name="master_header">
        <div class="row">
            <div class="col-xs-6">
                <strong><t t-esc="name"/><t t-if="is_required_tid"><span class="mandatory"> *</span></t></strong>
            </div>
            <div class="col-xs-6 pull-right text-right">
                <t t-if="is_required_tid">
                    <button class="btn btn-sm btn-warning tid_dialog_button" style="margin-right: 5%;">
                        Edit TIDs
                    </button>
                </t>
                <t t-if="price_type == 'both'">
                    <t t-if="price_type_text">
                        <t t-esc="quantity"/> x <t t-esc="price"/> <t t-esc="price_type_text"/>
                    </t>
                    <t t-if="price_type_text2">
                        <t t-esc="quantity"/> x <t t-esc="price2"/> <t t-esc="price_type_text2"/>
                    </t>
                </t>
                <t t-if="price_type != 'both' and product_type != 'packs'">
                    <t t-esc="quantity"/> x <t t-esc="price"/> <t t-esc="price_type_text"/>
                </t>
                <t t-if="price_type != 'both' and product_type == 'packs'">
                    <t t-esc="price"/> <t t-esc="price_type_text"/>
                </t>
            </div>
        </div>
    </t>

    <t t-name="master_product_row">
        <t t-if="children_modifier">
            <h4>Included products</h4>
            <ul class="list-unstyled" style="padding-left: 10px;">
                <t t-foreach="children_modifier" t-as="elmt">
                    <li>
                        <t t-if="product_type != 'packs'"><t t-esc="quantity"/> x </t><t t-esc="elmt[0]"/>
                        <span t-if="elmt[1]" class="label label-danger"><t t-esc="elmt[1]"/></span>
                    </li>
                </t>
            </ul>
            <br />
        </t>
    </t>

    <t t-name="master_product">
        <div t-att-id="'product_relation_'+id">
            <t t-call="master_product_row"/>
        </div>
    </t>

    <t t-name="simple_product">
        <div class="form-group">
            <div class="checkbox">
                <label>
                    <div class="row">
                        <div class="col-xs-8" t-att-style="'padding-left: ' + (level*15+10) + 'px;'">
                            <t t-if="default">
                                <input type="checkbox" t-att-value="id" checked="true">
                                    <t t-esc="name"/><t t-if="is_required_tid"><span class="mandatory"> *</span></t>
                                </input>
                            </t>
                            <t t-if="!default">
                                <input type="checkbox" t-att-value="id">
                                    <t t-esc="name"/><t t-if="is_required_tid"><span class="mandatory"> *</span></t>
                                </input>
                            </t>
                        </div>
                        <t t-if="!is_group" t-call="quantity_template"/>
                        <t t-if="!is_group" t-call="price_template"/>
                    </div>
                </label>
            </div>
        </div>
    </t>

    <t t-name="mandatory_product">
        <div class="form-group">
            <div class="checkbox">
                <label>
                    <div class="row">
                        <div class="col-xs-8" t-att-style="'padding-left: ' + (level*15+10) + 'px;'">
                            <input type="checkbox" t-att-value="id" checked="true" disabled="true">
                                <t t-esc="name"/><t t-if="is_required_tid"><span class="mandatory"> *</span></t>
                            </input>
                        </div>
                        <t t-if="!is_group" t-call="quantity_template"/>
                        <t t-if="!is_group" t-call="price_template"/>
                    </div>
                </label>
            </div>
        </div>
    </t>

    <t t-name="mandatory_exclusive_product">
        <t t-set="is_exclusive" t-value="True"/>
        <div class="form-group">
            <t t-foreach="relations" t-as="product">
                <div class="radio" t-att-id="'product_relation_'+id" required="true">
                    <label>
                        <div class="row">
                            <div class="col-xs-8" t-att-style="'padding-left: ' + (level*15+10) + 'px;'">
                                <t t-if="product.default">
                                    <span t-esc="is_exclusive"></span>
                                    <input type="radio" t-att-value="product.id" t-att-name="'exclusive_'+group_id" checked="true">
                                        <t t-esc="product.name"/><t t-if="product.is_required_tid"><span class="mandatory"> *</span></t>
                                    </input>
                                </t>
                                <t t-if="!product.default">
                                    <input type="radio" t-att-value="product.id" t-att-name="'exclusive_'+group_id">
                                        <t t-esc="product.name"/><t t-if="product.is_required_tid"><span class="mandatory"> *</span></t>
                                    </input>
                                </t>
                            </div>
                            <t t-if="!product.is_group" t-call="quantity_exclusive_template"/>
                            <t t-if="!product.is_group" t-call="price_template"/>
                        </div>
                    </label>
                </div>
            </t>
        </div>
    </t>

    <t t-name="exclusive_product">
        <div class="form-group">
            <div class="radio" id="product_relation_0">
                <label>
                    <div class="row">
                        <div class="col-xs-8" t-att-style="'padding-left: ' + (level*15+10) + 'px;'">
                            <input type="radio" t-att-value="0" t-att-name="'exclusive_'+group_id" checked="true">
                                None
                            </input>
                        </div>
                    </div>
                </label>
            </div>
            <t t-call="mandatory_exclusive_product"/>
        </div>
    </t>

    <t t-name="tid_inputs">
        <t t-foreach="amount_of_inputs">
            <div class="col-xs-6 mg-top-10">
                <div class="input-group">
                    <span class="input-group-addon">01</span>
                    <input class="form-control tid_input" autofocus="autofocus" maxlength="6" type="text"/>
                </div>
            </div>
        </t>
    </t>

    <t t-name="price_template">
        <t t-if="is_required_tid">
            <div class="col-xs-1">
                <button class="btn btn-sm btn-warning tid_dialog_button" t-att-product_id="id">
                    Edit TIDs
                </button>
            </div>
            <div class="col-xs-2 text-right">
                <t t-call="price_pack"/>
            </div>
        </t>
        <t t-if="!is_required_tid">
            <div class="col-xs-3 text-right">
                <t t-call="price_pack"/>
            </div>
        </t>
    </t>

    <t t-name="quantity_template">
        <div class="col-xs-1 no-padding text-right">
            <t t-if="editable">
                <input type="number" class="form-control input-sm" id="qty" min="1" t-att-value="quantity" data-bind="value:replyNumber" style="width:100%"/>
            </t>
            <t t-if="!editable">
                <input type="number" class="form-control input-sm" id="qty" min="1" t-att-value="quantity" data-bind="value:replyNumber" style="width:100%" disabled='disabled'/>
            </t>
        </div>
    </t>

    <t t-name="quantity_exclusive_template">
        <div class="col-xs-1 no-padding text-right">
            <t t-if="product.editable">
                <input type="number" t-att-id="product.id" min="1" t-att-value="product.quantity" data-bind="value:replyNumber" class="qty form-control input-sm" style="width:100%;"/>
            </t>
            <t t-if="!product.editable">
                <input type="number" t-att-id="product.id" min="1" t-att-value="product.quantity" data-bind="value:replyNumber" class="qty form-control input-sm" style="width:100%;" disabled='disabled'/>
            </t>
        </div>
    </t>

    <t t-name="price_pack">
        <t t-if="!is_included_in_pack">
            <t t-esc="price"/> €<t t-if="price_type != 'oneoff'">/m</t>
        </t>
        <t t-if="is_included_in_pack">
            <h6 style="color: grey; display:inline;">(Inc. packs)</h6>
        </t>
    </t>

    <t t-name="warning_tid_required">
        <div id="tid_required_warning" class="alert alert-warning collapse">
            <i class="fa fa-exclamation-triangle"/> <i>You must enter the TIDs for the products with a <span class="mandatory">*</span></i>
        </div>
    </t>

</templates>
